<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jogo da Memória - Resíduos e Lixeiras</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #e8f5e9;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      box-sizing: border-box;
    }

    h1 { color: #2e7d32; margin-bottom: 10px; text-align: center; }
    #attempts, #timer { margin-bottom: 15px; font-size: 1.2em; }
    #message { margin-top: 15px; font-size: 1.5em; color: #d32f2f; font-weight: bold; display: none; text-align: center; }

    #game-board {
      display: grid;
      grid-template-columns: repeat(4, 120px);
      gap: 10px;
      justify-content: center;
    }

    .card { width: 120px; height: 120px; perspective: 1000px; }
    .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; cursor: pointer; }
    .card.flipped .card-inner { transform: rotateY(180deg); }
    .card-front, .card-back { position: absolute; width: 100%; height: 100%; border-radius: 10px; display: flex; align-items: center; justify-content: center; backface-visibility: hidden; font-size: 3em; }
    .card-front { background-color: #a5d6a7; }
    .card-back { background-color: #fff; transform: rotateY(180deg); }

    .card.matched .card-back { background-color: #c8e6c9; box-shadow: 0 0 15px 5px gold; animation: shine 0.8s ease-in-out; }
    @keyframes shine { 0% { box-shadow: 0 0 5px 2px gold; } 50% { box-shadow: 0 0 20px 8px gold; } 100% { box-shadow: 0 0 5px 2px gold; } }

    #reset { margin-top: 20px; padding: 10px 20px; background-color: #2e7d32; color: white; border: none; border-radius: 5px; font-size: 1em; cursor: pointer; }
    #reset:hover { background-color: #1b5e20; }

    #qr-container { margin-top: 20px; text-align: center; }
    #qr-code-wrapper { padding: 10px; background-color: #c8e6c9; border: 3px solid #2e7d32; border-radius: 15px; display: inline-block; }

    @media (max-width: 768px) { #game-board { grid-template-columns: repeat(2, 90px); } .card { width: 90px; height: 90px; } .card-front, .card-back { font-size: 2.5em; } }
    @media (max-width: 480px) { #game-board { grid-template-columns: repeat(2, 70px); } .card { width: 70px; height: 70px; } .card-front, .card-back { font-size: 2em; } }
  </style>
</head>
<body>
  <h1>Jogo da Memória - Resíduos e Lixeiras</h1>
  <p id="attempts">Tentativas: 0</p>
  <p id="timer">Tempo: 60s</p>
  <div id="game-board"></div>
  <div id="message">🎉 Parabéns! Você completou o jogo! 🎉</div>
  <button id="reset">Reiniciar Jogo</button>

  <div id="qr-container">
    <p style="font-size:1.2em; font-weight:bold; color:#2e7d32; margin-bottom:10px;">📱 Abra este jogo no celular:</p>
    <div id="qr-code-wrapper"><div id="qr-code"></div></div>
    <p style="font-size:0.9em; color:#555; margin-top:5px;">Escaneie o QR Code acima para jogar no celular</p>
  </div>

  <!-- Sons -->
  <audio id="flip-sound" src="https://freesound.org/data/previews/403/403008_5121236-lq.mp3"></audio>
  <audio id="match-sound" src="https://freesound.org/data/previews/331/331912_3248244-lq.mp3"></audio>
  <audio id="win-sound" src="https://freesound.org/data/previews/331/331912_3248244-lq.mp3"></audio>

  <!-- QRCode.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <script>
    const residuos = [
      { tipo: 'papel', lixeira: 'azul', emoji: '📄', img: 'https://template.canva.com/EAE96ZNglps/3/0/1600w-B6-1dEbNyY4.jpg' },
      { tipo: 'plastico', lixeira: 'vermelho', emoji: '🧴', img: 'https://template.canva.com/EAE96ZNglps/3/2/1600w-a5LTJTlV1Qk.jpg' },
      { tipo: 'organico', lixeira: 'marrom', emoji: '🍌', img: 'https://template.canva.com/EAE96ZNglps/3/1/1600w-kq7q5Bnkf78.jpg' },
      { tipo: 'metal', lixeira: 'amarela', emoji: '🥫', img: 'https://template.canva.com/EAE96ZNglps/3/4/1600w-WjdCwo7lCT4.jpg' },
      { tipo: 'vidro', lixeira: 'verde', emoji: '🍾', img: 'https://template.canva.com/EAE96ZNglps/3/3/1600w-14ctATwVQIU.jpg' },
      { tipo: 'madeira', lixeira: 'preto', emoji: '🪵', img: 'https://template.canva.com/EAGNFghX7EE/1/0/1600w-SghG65_kjD4.jpg' }
    ];

    let cards = [], firstCard = null, secondCard = null, lockBoard = false, attempts = 0, matchedPairs = 0, time = 60, timerInterval;
    const board = document.getElementById('game-board');
    const resetButton = document.getElementById('reset');
    const attemptsDisplay = document.getElementById('attempts');
    const message = document.getElementById('message');
    const flipSound = document.getElementById('flip-sound');
    const matchSound = document.getElementById('match-sound');
    const winSound = document.getElementById('win-sound');
    const timerDisplay = document.getElementById('timer');

    // QR Code apontando para o GitHub Pages
    new QRCode(document.getElementById("qr-code"), {
      text: "https://github.com/alexsuzarte1405/jogodamemoria_residuos.git", // substitua pelo seu usuário/repositorio
      width: 160,
      height: 160,
      colorDark : "#2e7d32",
      colorLight : "#ffffff",
      correctLevel : QRCode.CorrectLevel.H
    });

    function createBoard() {
      const residuosCards = residuos.map(r => ({ tipo: r.tipo, categoria: 'residuo', emoji: r.emoji, lixeira: r.lixeira }));
      const lixeiraCards = residuos.map(r => ({ tipo: r.lixeira, categoria: 'lixeira', img: r.img }));
      cards = [...residuosCards, ...lixeiraCards].sort(() => 0.5 - Math.random());

      board.innerHTML = '';
      attempts = 0; matchedPairs = 0; attemptsDisplay.textContent = `Tentativas: ${attempts}`;
      message.style.display = 'none'; lockBoard = false;

      cards.forEach((card) => {
        const cardDiv = document.createElement('div');
        cardDiv.classList.add('card');
        cardDiv.dataset.categoria = card.categoria;
        cardDiv.dataset.tipo = card.tipo;
        cardDiv.dataset.lixeira = card.lixeira || '';

        cardDiv.innerHTML = `<div class="card-inner"><div class="card-front">?</div>
          <div class="card-back">${card.categoria==='residuo'?card.emoji:`<img src="${card.img}" alt="${card.tipo}" style="width:80%; height:80%; object-fit:contain;">`}</div></div>`;

        cardDiv.addEventListener('click', flipCard);
        board.appendChild(cardDiv);
      });

      startTimer();
    }

    function flipCard() {
      if(lockBoard || this===firstCard) return;
      this.classList.add('flipped'); playSound(flipSound);
      if(!firstCard){ firstCard=this; return; }
      secondCard=this; attempts++; attemptsDisplay.textContent=`Tentativas: ${attempts}`;
      checkMatch();
    }

    function checkMatch() {
      if((firstCard.dataset.categoria==='residuo' && secondCard.dataset.categoria==='lixeira' && firstCard.dataset.lixeira===secondCard.dataset.tipo) ||
         (firstCard.dataset.categoria==='lixeira' && secondCard.dataset.categoria==='residuo' && secondCard.dataset.lixeira===firstCard.dataset.tipo)){
        firstCard.classList.add('matched'); secondCard.classList.add('matched'); matchedPairs++; playSound(matchSound); resetTurn();
        if(matchedPairs===residuos.length){ setTimeout(()=>{ message.style.display='block'; playSound(winSound); clearInterval(timerInterval); },500); }
      } else { lockBoard=true; setTimeout(()=>{ firstCard.classList.remove('flipped'); secondCard.classList.remove('flipped'); resetTurn(); },1000); }
    }

    function resetTurn(){ [firstCard,secondCard,lockBoard]=[null,null,false]; }

    function startTimer(){
      clearInterval(timerInterval); time=60; timerDisplay.textContent=`Tempo: ${time}s`;
      timerInterval=setInterval(()=>{
        time--; timerDisplay.textContent=`Tempo: ${time}s`;
        if(time<=0){ clearInterval(timerInterval); lockBoard=true; alert('⏰ Tempo esgotado! Tente novamente.'); createBoard(); }
      },1000);
    }

    function playSound(sound){ const audio=sound.cloneNode(); audio.play(); }
    resetButton.addEventListener('click', createBoard);
    createBoard();
  </script>
</body>
</html>
